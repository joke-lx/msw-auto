{"version":3,"sources":["../../src/mcp/server.ts","../../src/mcp/analyzer.js","../../src/mcp/llm-service.js","../../src/mcp/project-manager.js"],"sourcesContent":["/**\r\n * MSW Auto MCP Server\r\n *\r\n * Provides tools for AI-powered mock server management\r\n * Tools include: file operations, project analysis, mock generation\r\n */\r\n\r\nimport { Server } from '@modelcontextprotocol/sdk/server/index.js';\r\nimport { StdioServerTransport } from '@modelcontextprotocol/sdk/server/stdio.js';\r\nimport {\r\n  CallToolRequestSchema,\r\n  ListToolsRequestSchema,\r\n} from '@modelcontextprotocol/sdk/types.js';\r\nimport * as fs from 'fs';\r\nimport * as path from 'path';\r\nimport { analyzeProject } from './analyzer.js';\r\nimport { llmService } from './llm-service.js';\r\nimport { ProjectManager } from './project-manager.js';\r\n\r\nconst projectManager = new ProjectManager();\r\n\r\n/**\r\n * MCP Server instance\r\n */\r\nclass MSWAutoMCPServer {\r\n  private server: Server;\r\n\r\n  constructor() {\r\n    this.server = new Server(\r\n      {\r\n        name: 'msw-auto',\r\n        version: '1.0.0',\r\n      },\r\n      {\r\n        capabilities: {\r\n          tools: {},\r\n        },\r\n      }\r\n    );\r\n\r\n    this.setupHandlers();\r\n  }\r\n\r\n  private setupHandlers() {\r\n    // List available tools\r\n    this.server.setRequestHandler(ListToolsRequestSchema, async () => {\r\n      return {\r\n        tools: [\r\n          // File operations\r\n          {\r\n            name: 'read_file',\r\n            description: 'Read content of a file',\r\n            inputSchema: {\r\n              type: 'object',\r\n              properties: {\r\n                path: {\r\n                  type: 'string',\r\n                  description: 'Absolute or relative path to the file',\r\n                },\r\n              },\r\n              required: ['path'],\r\n            },\r\n          },\r\n          {\r\n            name: 'write_file',\r\n            description: 'Write content to a file (creates or overwrites)',\r\n            inputSchema: {\r\n              type: 'object',\r\n              properties: {\r\n                path: {\r\n                  type: 'string',\r\n                  description: 'Absolute or relative path for the file',\r\n                },\r\n                content: {\r\n                  type: 'string',\r\n                  description: 'Content to write to the file',\r\n                },\r\n              },\r\n              required: ['path', 'content'],\r\n            },\r\n          },\r\n          {\r\n            name: 'list_directory',\r\n            description: 'List files and directories',\r\n            inputSchema: {\r\n              type: 'object',\r\n              properties: {\r\n                path: {\r\n                  type: 'string',\r\n                  description: 'Directory path to list',\r\n                },\r\n              },\r\n              required: ['path'],\r\n            },\r\n          },\r\n          {\r\n            name: 'create_directory',\r\n            description: 'Create a new directory',\r\n            inputSchema: {\r\n              type: 'object',\r\n              properties: {\r\n                path: {\r\n                  type: 'string',\r\n                  description: 'Directory path to create',\r\n                },\r\n              },\r\n              required: ['path'],\r\n            },\r\n          },\r\n          {\r\n            name: 'file_exists',\r\n            description: 'Check if a file or directory exists',\r\n            inputSchema: {\r\n              type: 'object',\r\n              properties: {\r\n                path: {\r\n                  type: 'string',\r\n                  description: 'Path to check',\r\n                },\r\n              },\r\n              required: ['path'],\r\n            },\r\n          },\r\n          // Project operations\r\n          {\r\n            name: 'analyze_project',\r\n            description: 'Analyze a project to discover API endpoints',\r\n            inputSchema: {\r\n              type: 'object',\r\n              properties: {\r\n                projectPath: {\r\n                  type: 'string',\r\n                  description: 'Path to the project directory to analyze',\r\n                },\r\n                proxyUrl: {\r\n                  type: 'string',\r\n                  description: 'Optional URL of the frontend service to proxy',\r\n                },\r\n              },\r\n              required: ['projectPath'],\r\n            },\r\n          },\r\n          {\r\n            name: 'generate_mock',\r\n            description: 'Generate mock data for discovered API endpoints using AI',\r\n            inputSchema: {\r\n              type: 'object',\r\n              properties: {\r\n                projectPath: {\r\n                  type: 'string',\r\n                  description: 'Path to the project directory',\r\n                },\r\n                outputPath: {\r\n                  type: 'string',\r\n                  description: 'Output file path for generated mocks',\r\n                },\r\n                endpoints: {\r\n                  type: 'array',\r\n                  description: 'Optional specific endpoints to generate mocks for',\r\n                  items: {\r\n                    type: 'object',\r\n                    properties: {\r\n                      method: { type: 'string' },\r\n                      path: { type: 'string' },\r\n                    },\r\n                  },\r\n                },\r\n              },\r\n              required: ['projectPath'],\r\n            },\r\n          },\r\n          {\r\n            name: 'start_mock_server',\r\n            description: 'Start the mock server for a project',\r\n            inputSchema: {\r\n              type: 'object',\r\n              properties: {\r\n                projectPath: {\r\n                  type: 'string',\r\n                  description: 'Path to the project directory',\r\n                },\r\n                port: {\r\n                  type: 'number',\r\n                  description: 'Port number for the mock server (default: 3001)',\r\n                  default: 3001,\r\n                },\r\n              },\r\n              required: ['projectPath'],\r\n            },\r\n          },\r\n          {\r\n            name: 'list_projects',\r\n            description: 'List all managed projects',\r\n            inputSchema: {\r\n              type: 'object',\r\n              properties: {},\r\n            },\r\n          },\r\n          {\r\n            name: 'get_llm_config',\r\n            description: 'Get current LLM configuration',\r\n            inputSchema: {\r\n              type: 'object',\r\n              properties: {},\r\n            },\r\n          },\r\n          {\r\n            name: 'reload_llm_config',\r\n            description: 'Reload LLM configuration from file',\r\n            inputSchema: {\r\n              type: 'object',\r\n              properties: {},\r\n            },\r\n          },\r\n        ],\r\n      };\r\n    });\r\n\r\n    // Handle tool calls\r\n    this.server.setRequestHandler(CallToolRequestSchema, async (request) => {\r\n      const { name, arguments: args } = request.params;\r\n\r\n      try {\r\n        switch (name) {\r\n          // File operations\r\n          case 'read_file':\r\n            return this.handleReadFile(args);\r\n          case 'write_file':\r\n            return this.handleWriteFile(args);\r\n          case 'list_directory':\r\n            return this.handleListDirectory(args);\r\n          case 'create_directory':\r\n            return this.handleCreateDirectory(args);\r\n          case 'file_exists':\r\n            return this.handleFileExists(args);\r\n          // Project operations\r\n          case 'analyze_project':\r\n            return this.handleAnalyzeProject(args);\r\n          case 'generate_mock':\r\n            return this.handleGenerateMock(args);\r\n          case 'start_mock_server':\r\n            return this.handleStartMockServer(args);\r\n          case 'list_projects':\r\n            return this.handleListProjects();\r\n          case 'get_llm_config':\r\n            return this.handleGetLLMConfig();\r\n          case 'reload_llm_config':\r\n            return this.handleReloadLLMConfig();\r\n          default:\r\n            return {\r\n              content: [{ type: 'text', text: `Unknown tool: ${name}` }],\r\n              isError: true,\r\n            };\r\n        }\r\n      } catch (error) {\r\n        return {\r\n          content: [\r\n            {\r\n              type: 'text',\r\n              text: `Error: ${error instanceof Error ? error.message : String(error)}`,\r\n            },\r\n          ],\r\n          isError: true,\r\n        };\r\n      }\r\n    });\r\n  }\r\n\r\n  // File operation handlers\r\n  private handleReadFile(args: any) {\r\n    const { path: filePath } = args;\r\n    const content = fs.readFileSync(filePath, 'utf-8');\r\n    return {\r\n      content: [{ type: 'text', text: content }],\r\n    };\r\n  }\r\n\r\n  private handleWriteFile(args: any) {\r\n    const { path: filePath, content } = args;\r\n    const dir = path.dirname(filePath);\r\n    if (!fs.existsSync(dir)) {\r\n      fs.mkdirSync(dir, { recursive: true });\r\n    }\r\n    fs.writeFileSync(filePath, content, 'utf-8');\r\n    return {\r\n      content: [{ type: 'text', text: `File written: ${filePath}` }],\r\n    };\r\n  }\r\n\r\n  private handleListDirectory(args: any) {\r\n    const { path: dirPath } = args;\r\n    const entries = fs.readdirSync(dirPath, { withFileTypes: true });\r\n    const result = entries.map(entry => ({\r\n      name: entry.name,\r\n      type: entry.isDirectory() ? 'directory' : 'file',\r\n    }));\r\n    return {\r\n      content: [{ type: 'text', text: JSON.stringify(result, null, 2) }],\r\n    };\r\n  }\r\n\r\n  private handleCreateDirectory(args: any) {\r\n    const { path: dirPath } = args;\r\n    fs.mkdirSync(dirPath, { recursive: true });\r\n    return {\r\n      content: [{ type: 'text', text: `Directory created: ${dirPath}` }],\r\n    };\r\n  }\r\n\r\n  private handleFileExists(args: any) {\r\n    const { path: targetPath } = args;\r\n    const exists = fs.existsSync(targetPath);\r\n    const stat = exists ? fs.statSync(targetPath) : null;\r\n    return {\r\n      content: [{\r\n        type: 'text',\r\n        text: JSON.stringify({\r\n          exists,\r\n          isDirectory: exists ? stat!.isDirectory() : null,\r\n          isFile: exists ? stat!.isFile() : null,\r\n        }, null, 2),\r\n      }],\r\n    };\r\n  }\r\n\r\n  private async handleAnalyzeProject(args: any) {\r\n    const { projectPath, proxyUrl } = args;\r\n\r\n    const analysis = await analyzeProject(projectPath, proxyUrl);\r\n\r\n    // Save project\r\n    if (!projectManager.hasProject(projectPath)) {\r\n      projectManager.addProject({\r\n        name: projectPath.split(/[\\\\/]/).pop() || 'unnamed',\r\n        path: projectPath,\r\n        proxyUrl,\r\n        endpoints: analysis.endpoints,\r\n      });\r\n    }\r\n\r\n    return {\r\n      content: [\r\n        {\r\n          type: 'text',\r\n          text: JSON.stringify({\r\n            success: true,\r\n            endpoints: analysis.endpoints.length,\r\n            frameworks: analysis.frameworks,\r\n            summary: analysis.summary,\r\n          }, null, 2),\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  private async handleGenerateMock(args: any) {\r\n    const { projectPath, outputPath, endpoints } = args;\r\n\r\n    const project = projectManager.getProject(projectPath);\r\n    if (!project) {\r\n      return {\r\n        content: [{ type: 'text', text: `Project not found: ${projectPath}` }],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    const endpointsToGenerate = endpoints || project.endpoints;\r\n    if (!endpointsToGenerate?.length) {\r\n      return {\r\n        content: [{ type: 'text', text: 'No endpoints to generate mocks for' }],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    // Check if LLM is configured\r\n    if (!llmService.isConfigured()) {\r\n      return {\r\n        content: [{\r\n          type: 'text',\r\n          text: 'LLM not configured. Please run: msw-auto setting --apikey YOUR_API_KEY'\r\n        }],\r\n        isError: true,\r\n      };\r\n    }\r\n\r\n    // Generate mocks using LLM\r\n    const mocks = [];\r\n    for (const endpoint of endpointsToGenerate) {\r\n      const mockData = await llmService.generateMock(\r\n        endpoint.method,\r\n        endpoint.path\r\n      );\r\n      mocks.push({\r\n        method: endpoint.method,\r\n        path: endpoint.path,\r\n        status: 200,\r\n        response: mockData,\r\n        headers: { 'Content-Type': 'application/json' },\r\n      });\r\n    }\r\n\r\n    // Update project\r\n    projectManager.updateProject(projectPath, { mocks });\r\n\r\n    // Write to file if outputPath provided\r\n    if (outputPath) {\r\n      const content = `// Auto-generated mocks\\n${JSON.stringify(mocks, null, 2)}`;\r\n      fs.writeFileSync(outputPath, content, 'utf-8');\r\n    }\r\n\r\n    return {\r\n      content: [\r\n        {\r\n          type: 'text',\r\n          text: JSON.stringify({\r\n            success: true,\r\n            generated: mocks.length,\r\n            outputPath: outputPath || null,\r\n            mocks: mocks.map(m => ({\r\n              method: m.method,\r\n              path: m.path,\r\n              status: m.status,\r\n            })),\r\n          }, null, 2),\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  private handleStartMockServer(args: any) {\r\n    const { projectPath, port } = args;\r\n    const mockPort = port || 3001;\r\n\r\n    return {\r\n      content: [\r\n        {\r\n          type: 'text',\r\n          text: JSON.stringify({\r\n            success: true,\r\n            message: `Mock server started`,\r\n            port: mockPort,\r\n            url: `http://localhost:${mockPort}`,\r\n          }, null, 2),\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  private handleListProjects() {\r\n    const projects = projectManager.listProjects();\r\n\r\n    return {\r\n      content: [\r\n        {\r\n          type: 'text',\r\n          text: JSON.stringify({\r\n            projects: projects.map(p => ({\r\n              name: p.name,\r\n              path: p.path,\r\n              status: p.status,\r\n              endpointCount: p.endpoints?.length || 0,\r\n            })),\r\n          }, null, 2),\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  private handleGetLLMConfig() {\r\n    const config = llmService.getConfig();\r\n\r\n    return {\r\n      content: [\r\n        {\r\n          type: 'text',\r\n          text: JSON.stringify({\r\n            provider: config.provider,\r\n            baseUrl: config.baseUrl,\r\n            model: config.model,\r\n            configured: !!config.apiKey,\r\n          }, null, 2),\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  private handleReloadLLMConfig() {\r\n    llmService.reload();\r\n    const config = llmService.getConfig();\r\n\r\n    return {\r\n      content: [\r\n        {\r\n          type: 'text',\r\n          text: JSON.stringify({\r\n            success: true,\r\n            config: {\r\n              provider: config.provider,\r\n              baseUrl: config.baseUrl,\r\n              model: config.model,\r\n            },\r\n          }, null, 2),\r\n        },\r\n      ],\r\n    };\r\n  }\r\n\r\n  async run() {\r\n    const transport = new StdioServerTransport();\r\n    await this.server.connect(transport);\r\n    console.error('MSW Auto MCP Server running on stdio');\r\n  }\r\n}\r\n\r\n// Run the server\r\nconst server = new MSWAutoMCPServer();\r\nserver.run().catch(console.error);\r\n","/**\n * Project Analyzer\n *\n * Analyzes a project to discover API endpoints\n */\nimport * as fs from 'fs';\nimport * as path from 'path';\n/**\n * Analyze a project directory to discover API endpoints\n */\nexport async function analyzeProject(projectPath, proxyUrl) {\n    const endpoints = [];\n    const frameworks = [];\n    // Check for common API patterns\n    const patterns = [\n        // Express routes\n        { pattern: /router\\.(get|post|put|patch|delete)\\s*\\(\\s*['\"`]([^'\"`]+)['\"`]/g, framework: 'express' },\n        // Fastify routes\n        { pattern: /fastify\\.(get|post|put|patch|delete)\\s*\\(\\s*['\"`]([^'\"`]+)['\"`]/g, framework: 'fastify' },\n        // Koa routes\n        { pattern: /router\\.(get|post|put|delete)\\s*\\(\\s*['\"`]([^'\"`]+)['\"`]/g, framework: 'koa' },\n        // Next.js API routes\n        { pattern: /export\\s+(default\\s+)?(async\\s+)?function\\s+\\w+\\s*\\(\\s*req|handler\\s*=/g, framework: 'nextjs', path: 'pages/api' },\n        // NestJS controllers\n        { pattern: /@\\((['\"`])[^'\"`]+['\"`]\\)\\s*\\s*@(Get|Post|Put|Patch|Delete|Delete)\\s*\\(['\"`]([^'\"`]+)['\"`]/g, framework: 'nestjs' },\n        // Spring Boot\n        { pattern: /@(GetMapping|PostMapping|PutMapping|DeleteMapping|RequestMapping)\\s*\\(\\s*value\\s*=\\s*['\"`]([^'\"`]+)['\"`]/g, framework: 'spring' },\n        // Flask\n        { pattern: /@(app\\.)?(get|post|put|delete)\\s*\\(\\s*['\"`]([^'\"`]+)['\"`]/g, framework: 'flask' },\n        // Django\n        { pattern: /path\\s*\\(\\s*['\"`]([^'\"`]+)['\"`]/g, framework: 'django' },\n    ];\n    // Analyze directory recursively\n    await analyzeDirectory(projectPath, patterns, endpoints, frameworks);\n    // If proxy URL is provided, try to get OpenAPI/Swagger spec\n    if (proxyUrl) {\n        try {\n            const openApiEndpoints = await fetchOpenApiEndpoints(proxyUrl);\n            endpoints.push(...openApiEndpoints);\n        }\n        catch {\n            // Ignore errors from fetching OpenAPI spec\n        }\n    }\n    // Remove duplicates\n    const uniqueEndpoints = deduplicateEndpoints(endpoints);\n    return {\n        endpoints: uniqueEndpoints,\n        frameworks: [...new Set(frameworks)],\n        summary: `Found ${uniqueEndpoints.length} API endpoints across ${frameworks.length} framework(s)`,\n    };\n}\nasync function analyzeDirectory(dirPath, patterns, endpoints, frameworks) {\n    if (!fs.existsSync(dirPath))\n        return;\n    const entries = fs.readdirSync(dirPath, { withFileTypes: true });\n    for (const entry of entries) {\n        const fullPath = path.join(dirPath, entry.name);\n        // Skip common non-source directories\n        if (entry.isDirectory()) {\n            if (shouldSkipDirectory(entry.name)) {\n                continue;\n            }\n            await analyzeDirectory(fullPath, patterns, endpoints, frameworks);\n        }\n        else if (entry.isFile() && isSourceFile(entry.name)) {\n            analyzeFile(fullPath, patterns, endpoints, frameworks);\n        }\n    }\n}\nfunction shouldSkipDirectory(name) {\n    const skipDirs = [\n        'node_modules',\n        'dist',\n        'build',\n        '.git',\n        '.next',\n        '.nuxt',\n        'coverage',\n        '__pycache__',\n        'venv',\n        '.venv',\n        'vendor',\n    ];\n    return skipDirs.includes(name);\n}\nfunction isSourceFile(filename) {\n    const sourceExtensions = [\n        '.js',\n        '.jsx',\n        '.ts',\n        '.tsx',\n        '.py',\n        '.java',\n        '.go',\n        '.rs',\n        '.rb',\n        '.php',\n    ];\n    return sourceExtensions.some(ext => filename.endsWith(ext));\n}\nfunction analyzeFile(filePath, patterns, endpoints, frameworks) {\n    try {\n        const content = fs.readFileSync(filePath, 'utf-8');\n        for (const { pattern, framework } of patterns) {\n            let match;\n            // Reset regex state\n            const regex = new RegExp(pattern.source, pattern.flags);\n            while ((match = regex.exec(content)) !== null) {\n                frameworks.push(framework);\n                let method = 'GET';\n                let endpointPath = match[0];\n                // Extract method and path based on framework\n                if (framework === 'express' || framework === 'fastify' || framework === 'koa') {\n                    method = match[1].toUpperCase();\n                    endpointPath = match[2];\n                }\n                else if (framework === 'nestjs') {\n                    method = match[2].toUpperCase();\n                    endpointPath = match[3];\n                }\n                else if (framework === 'spring') {\n                    method = match[1].replace('Mapping', '').toUpperCase();\n                    endpointPath = match[2];\n                }\n                else if (framework === 'flask') {\n                    method = match[1].toUpperCase();\n                    endpointPath = match[2];\n                }\n                const endpoint = {\n                    framework,\n                    file: filePath,\n                    method,\n                    path: endpointPath,\n                };\n                endpoints.push(endpoint);\n            }\n        }\n    }\n    catch {\n        // Ignore file read errors\n    }\n}\nasync function fetchOpenApiEndpoints(proxyUrl) {\n    const endpoints = [];\n    // Try common OpenAPI/Swagger endpoints\n    const openApiPaths = [\n        '/api-docs',\n        '/swagger.json',\n        '/swagger/v1/swagger.json',\n        '/openapi.json',\n        '/api/openapi.json',\n        '/api/v1/api-docs',\n    ];\n    for (const openApiPath of openApiPaths) {\n        try {\n            const response = await fetch(`${proxyUrl}${openApiPath}`, {\n                signal: AbortSignal.timeout(5000),\n            });\n            if (response.ok) {\n                const spec = await response.json();\n                // Parse OpenAPI spec\n                if (spec.paths) {\n                    for (const [path, methods] of Object.entries(spec.paths)) {\n                        for (const [method, details] of Object.entries(methods)) {\n                            if (['get', 'post', 'put', 'patch', 'delete', 'options', 'head'].includes(method)) {\n                                endpoints.push({\n                                    method: method.toUpperCase(),\n                                    path,\n                                    framework: 'openapi',\n                                });\n                            }\n                        }\n                    }\n                }\n                break;\n            }\n        }\n        catch {\n            // Continue to next path\n        }\n    }\n    return endpoints;\n}\nfunction deduplicateEndpoints(endpoints) {\n    const seen = new Set();\n    const unique = [];\n    for (const endpoint of endpoints) {\n        const key = `${endpoint.method}:${endpoint.path}`;\n        if (!seen.has(key)) {\n            seen.add(key);\n            unique.push(endpoint);\n        }\n    }\n    return unique;\n}\n","/**\n * LLM Service\n *\n * Unified LLM service for MCP tools\n */\nimport Anthropic from '@anthropic-ai/sdk';\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport * as os from 'os';\n/**\n * Get LLM config from file\n */\nfunction getLLMConfig() {\n    const isCI = process.env.CI || process.env.GITHUB_ACTIONS;\n    const baseDir = isCI ? process.env.TMPDIR || '/tmp' : os.homedir();\n    const configPath = path.join(baseDir, '.msw-auto', 'config.json');\n    const defaultConfig = {\n        provider: 'anthropic',\n        baseUrl: 'https://api.anthropic.com',\n        apiKey: '',\n        model: 'claude-3-5-sonnet-20241022',\n        temperature: 0.7,\n        maxTokens: 4096,\n    };\n    try {\n        if (fs.existsSync(configPath)) {\n            const data = JSON.parse(fs.readFileSync(configPath, 'utf-8'));\n            return { ...defaultConfig, ...data.llm };\n        }\n    }\n    catch {\n        // Ignore\n    }\n    return defaultConfig;\n}\n/**\n * LLM Service class\n */\nexport class LLMService {\n    config;\n    anthropic;\n    constructor() {\n        this.config = getLLMConfig();\n        if (this.config.provider === 'anthropic') {\n            this.anthropic = new Anthropic({\n                apiKey: this.config.apiKey,\n                baseURL: this.config.baseUrl !== 'https://api.anthropic.com'\n                    ? this.config.baseUrl\n                    : undefined,\n            });\n        }\n    }\n    /**\n     * Reload config\n     */\n    reload() {\n        this.config = getLLMConfig();\n        if (this.config.provider === 'anthropic') {\n            this.anthropic = new Anthropic({\n                apiKey: this.config.apiKey,\n                baseURL: this.config.baseUrl !== 'https://api.anthropic.com'\n                    ? this.config.baseUrl\n                    : undefined,\n            });\n        }\n    }\n    /**\n     * Check if LLM is configured\n     */\n    isConfigured() {\n        return !!this.config.apiKey;\n    }\n    /**\n     * Send message to LLM\n     */\n    async sendMessage(system, user) {\n        if (!this.isConfigured()) {\n            throw new Error('LLM API key not configured. Run: msw-auto setting --apikey YOUR_KEY');\n        }\n        if (this.config.provider === 'anthropic') {\n            return this.sendAnthropicMessage(system, user);\n        }\n        // OpenAI compatible API (OpenAI, Qwen, Custom)\n        return this.sendOpenAICompatibleMessage(system, user);\n    }\n    async sendAnthropicMessage(system, user) {\n        const message = await this.anthropic.messages.create({\n            model: this.config.model,\n            max_tokens: this.config.maxTokens || 4096,\n            temperature: this.config.temperature || 0.7,\n            system: [{ type: 'text', text: system }],\n            messages: [{ role: 'user', content: [{ type: 'text', text: user }] }],\n        });\n        return message.content[0]?.text || '';\n    }\n    async sendOpenAICompatibleMessage(system, user) {\n        const response = await fetch(`${this.config.baseUrl}/chat/completions`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${this.config.apiKey}`,\n            },\n            body: JSON.stringify({\n                model: this.config.model,\n                temperature: this.config.temperature || 0.7,\n                max_tokens: this.config.maxTokens || 4096,\n                messages: [\n                    { role: 'system', content: system },\n                    { role: 'user', content: user },\n                ],\n            }),\n        });\n        if (!response.ok) {\n            const error = await response.text();\n            throw new Error(`LLM API error: ${response.status} - ${error}`);\n        }\n        const data = await response.json();\n        return data.choices?.[0]?.message?.content || '';\n    }\n    /**\n     * Generate mock data for an endpoint\n     */\n    async generateMock(method, endpointPath, context) {\n        const system = `你是一个专业的 Mock 数据生成专家。根据 API 端点信息生成符合业务逻辑的 JSON 响应数据。`;\n        const user = `请为以下 API 端点生成 Mock 响应数据：\r\n\r\n方法: ${method}\r\n路径: ${endpointPath}\r\n${context ? `业务上下文: ${context}` : ''}\r\n\r\n请只返回 JSON 数据，不要其他解释。`;\n        const response = await this.sendMessage(system, user);\n        // Try to parse JSON\n        try {\n            const jsonMatch = response.match(/```json\\n?([\\s\\S]*?)\\n?```/) ||\n                response.match(/\\{[\\s\\S]*\\}/);\n            const jsonStr = jsonMatch ? jsonMatch[1] || jsonMatch[0] : response;\n            return JSON.parse(jsonStr);\n        }\n        catch {\n            return { message: response };\n        }\n    }\n    /**\n     * Get current config\n     */\n    getConfig() {\n        return this.config;\n    }\n}\n// Export singleton\nexport const llmService = new LLMService();\n","/**\n * Project Manager\n *\n * Manages multiple projects and their configurations\n */\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport * as os from 'os';\n/**\n * Manages project configurations and state\n */\nexport class ProjectManager {\n    configPath;\n    projects;\n    constructor() {\n        const isCI = process.env.CI || process.env.GITHUB_ACTIONS;\n        const baseDir = isCI ? process.env.TMPDIR || '/tmp' : os.homedir();\n        this.configPath = path.join(baseDir, '.msw-auto', 'config.json');\n        this.projects = new Map();\n        this.load();\n    }\n    /**\n     * Load projects from config file\n     */\n    load() {\n        try {\n            if (fs.existsSync(this.configPath)) {\n                const data = JSON.parse(fs.readFileSync(this.configPath, 'utf-8'));\n                for (const [name, project] of Object.entries(data.projects)) {\n                    this.projects.set(project.path, project);\n                }\n            }\n        }\n        catch {\n            // Ignore errors, start with empty projects\n        }\n    }\n    /**\n     * Save projects to config file\n     */\n    save() {\n        const dir = path.dirname(this.configPath);\n        if (!fs.existsSync(dir)) {\n            fs.mkdirSync(dir, { recursive: true });\n        }\n        const data = {\n            projects: Object.fromEntries(this.projects),\n        };\n        fs.writeFileSync(this.configPath, JSON.stringify(data, null, 2));\n    }\n    /**\n     * Add a new project\n     */\n    addProject(project) {\n        const now = new Date().toISOString();\n        const newProject = {\n            ...project,\n            status: 'stopped',\n            createdAt: now,\n            updatedAt: now,\n        };\n        this.projects.set(project.path, newProject);\n        this.save();\n    }\n    /**\n     * Remove a project\n     */\n    removeProject(projectPath) {\n        this.projects.delete(projectPath);\n        this.save();\n    }\n    /**\n     * Get a project by path\n     */\n    getProject(projectPath) {\n        return this.projects.get(projectPath);\n    }\n    /**\n     * Check if a project exists\n     */\n    hasProject(projectPath) {\n        return this.projects.has(projectPath);\n    }\n    /**\n     * Update a project\n     */\n    updateProject(projectPath, updates) {\n        const project = this.projects.get(projectPath);\n        if (project) {\n            Object.assign(project, updates, { updatedAt: new Date().toISOString() });\n            this.save();\n        }\n    }\n    /**\n     * List all projects\n     */\n    listProjects() {\n        return Array.from(this.projects.values());\n    }\n    /**\n     * Set project status\n     */\n    setProjectStatus(projectPath, status) {\n        const project = this.projects.get(projectPath);\n        if (project) {\n            project.status = status;\n            project.updatedAt = new Date().toISOString();\n            this.save();\n        }\n    }\n    /**\n     * Get the config file path\n     */\n    getConfigPath() {\n        return this.configPath;\n    }\n}\n"],"mappings":"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","names":["fs","path","path","fs","path","fs","path","os"]}